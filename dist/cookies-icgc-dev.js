(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.icgc = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
!function(e){if(!e.hasInitialised){var t={escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(e,t){var i=" ";return 1===e.nodeType&&(i+e.className+i).replace(/[\n\t]/g,i).indexOf(i+t+i)>=0},addClass:function(e,t){e.className+=" "+t},removeClass:function(e,t){var i=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");e.className=e.className.replace(i,"")},interpolateString:function(e,t){var i=/{{([a-z][a-z0-9\-_]*)}}/gi;return e.replace(i,function(e){return t(arguments[1])||""})},getCookie:function(e){var t="; "+document.cookie,i=t.split("; "+e+"=");return 2!=i.length?void 0:i.pop().split(";").shift()},setCookie:function(e,t,i,n,o){var s=new Date;s.setDate(s.getDate()+(i||365));var r=[e+"="+t,"expires="+s.toUTCString(),"path="+(o||"/")];n&&r.push("domain="+n),document.cookie=r.join(";")},deepExtend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(i in e&&this.isPlainObject(e[i])&&this.isPlainObject(t[i])?this.deepExtend(e[i],t[i]):e[i]=t[i]);return e},throttle:function(e,t){var i=!1;return function(){i||(e.apply(this,arguments),i=!0,setTimeout(function(){i=!1},t))}},hash:function(e){var t,i,n,o=0;if(0===e.length)return o;for(t=0,n=e.length;t<n;++t)i=e.charCodeAt(t),o=(o<<5)-o+i,o|=0;return o},normaliseHex:function(e){return"#"==e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e},getContrast:function(e){e=this.normaliseHex(e);var t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),o=(299*t+587*i+114*n)/1e3;return o>=128?"#000":"#fff"},getLuminance:function(e){var t=parseInt(this.normaliseHex(e),16),i=38,n=(t>>16)+i,o=(t>>8&255)+i,s=(255&t)+i,r=(16777216+65536*(n<255?n<1?0:n:255)+256*(o<255?o<1?0:o:255)+(s<255?s<1?0:s:255)).toString(16).slice(1);return"#"+r},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isPlainObject:function(e){return"object"==typeof e&&null!==e&&e.constructor==Object}};e.status={deny:"deny",allow:"allow",dismiss:"dismiss"},e.transitionEnd=function(){var e=document.createElement("div"),t={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var i in t)if(t.hasOwnProperty(i)&&"undefined"!=typeof e.style[i+"ransition"])return t[i];return""}(),e.hasTransition=!!e.transitionEnd;var i=Object.keys(e.status).map(t.escapeRegExp);e.customStyles={},e.Popup=function(){function n(){this.initialise.apply(this,arguments)}function o(e){this.openingTimeout=null,t.removeClass(e,"cc-invisible")}function s(t){t.style.display="none",t.removeEventListener(e.transitionEnd,this.afterTransition),this.afterTransition=null}function r(){var t=this.options.onInitialise.bind(this);if(!window.navigator.cookieEnabled)return t(e.status.deny),!0;if(window.CookiesOK||window.navigator.CookiesOK)return t(e.status.allow),!0;var i=Object.keys(e.status),n=this.getStatus(),o=i.indexOf(n)>=0;return o&&t(n),o}function a(){var e=this.options.position.split("-"),t=[];return e.forEach(function(e){t.push("cc-"+e)}),t}function c(){var e=this.options,i="top"==e.position||"bottom"==e.position?"banner":"floating";t.isMobile()&&(i="floating");var n=["cc-"+i,"cc-type-"+e.type,"cc-theme-"+e.theme];e["static"]&&n.push("cc-static"),n.push.apply(n,a.call(this));p.call(this,this.options.palette);return this.customStyleSelector&&n.push(this.customStyleSelector),n}function l(){var e={},i=this.options;i.showLink||(i.elements.link="",i.elements.messagelink=i.elements.message),Object.keys(i.elements).forEach(function(n){e[n]=t.interpolateString(i.elements[n],function(e){var t=i.content[e];return e&&"string"==typeof t&&t.length?t:""})});var n=i.compliance[i.type];n||(n=i.compliance.info),e.compliance=t.interpolateString(n,function(t){return e[t]});var o=i.layouts[i.layout];return o||(o=i.layouts.basic),t.interpolateString(o,function(t){return e[t]})}function u(i){var n=this.options,o=document.createElement("div"),s=n.container&&1===n.container.nodeType?n.container:document.body;o.innerHTML=i;var r=o.children[0];return r.style.display="none",t.hasClass(r,"cc-window")&&e.hasTransition&&t.addClass(r,"cc-invisible"),this.onButtonClick=h.bind(this),r.addEventListener("click",this.onButtonClick),n.autoAttach&&(s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r)),r}function h(n){var o=n.target;if(t.hasClass(o,"cc-btn")){var s=o.className.match(new RegExp("\\bcc-("+i.join("|")+")\\b")),r=s&&s[1]||!1;r&&(this.setStatus(r),this.close(!0))}t.hasClass(o,"cc-close")&&(this.setStatus(e.status.dismiss),this.close(!0)),t.hasClass(o,"cc-revoke")&&this.revokeChoice()}function p(e){var i=t.hash(JSON.stringify(e)),n="cc-color-override-"+i,o=t.isPlainObject(e);return this.customStyleSelector=o?n:null,o&&d(i,e,"."+n),o}function d(i,n,o){if(e.customStyles[i])return void++e.customStyles[i].references;var s={},r=n.popup,a=n.button,c=n.highlight;r&&(r.text=r.text?r.text:t.getContrast(r.background),r.link=r.link?r.link:r.text,s[o+".cc-window"]=["color: "+r.text,"background-color: "+r.background],s[o+".cc-revoke"]=["color: "+r.text,"background-color: "+r.background],s[o+" .cc-link,"+o+" .cc-link:active,"+o+" .cc-link:visited"]=["color: "+r.link],a&&(a.text=a.text?a.text:t.getContrast(a.background),a.border=a.border?a.border:"transparent",s[o+" .cc-btn"]=["color: "+a.text,"border-color: "+a.border,"background-color: "+a.background],"transparent"!=a.background&&(s[o+" .cc-btn:hover, "+o+" .cc-btn:focus"]=["background-color: "+v(a.background)]),c?(c.text=c.text?c.text:t.getContrast(c.background),c.border=c.border?c.border:"transparent",s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+c.text,"border-color: "+c.border,"background-color: "+c.background]):s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+r.text]));var l=document.createElement("style");document.head.appendChild(l),e.customStyles[i]={references:1,element:l.sheet};var u=-1;for(var h in s)s.hasOwnProperty(h)&&l.sheet.insertRule(h+"{"+s[h].join(";")+"}",++u)}function v(e){return e=t.normaliseHex(e),"000000"==e?"#222":t.getLuminance(e)}function f(i){if(t.isPlainObject(i)){var n=t.hash(JSON.stringify(i)),o=e.customStyles[n];if(o&&!--o.references){var s=o.element.ownerNode;s&&s.parentNode&&s.parentNode.removeChild(s),e.customStyles[n]=null}}}function m(e,t){for(var i=0,n=e.length;i<n;++i){var o=e[i];if(o instanceof RegExp&&o.test(t)||"string"==typeof o&&o.length&&o===t)return!0}return!1}function b(){var t=this.setStatus.bind(this),i=this.options.dismissOnTimeout;"number"==typeof i&&i>=0&&(this.dismissTimeout=window.setTimeout(function(){t(e.status.dismiss)},Math.floor(i)));var n=this.options.dismissOnScroll;if("number"==typeof n&&n>=0){var o=function(i){window.pageYOffset>Math.floor(n)&&(t(e.status.dismiss),window.removeEventListener("scroll",o),this.onWindowScroll=null)};this.onWindowScroll=o,window.addEventListener("scroll",o)}}function y(){if("info"!=this.options.type&&(this.options.revokable=!0),t.isMobile()&&(this.options.animateRevokable=!1),this.options.revokable){var e=a.call(this);this.options.animateRevokable&&e.push("cc-animate"),this.customStyleSelector&&e.push(this.customStyleSelector);var i=this.options.revokeBtn.replace("{{classes}}",e.join(" "));this.revokeBtn=u.call(this,i);var n=this.revokeBtn;if(this.options.animateRevokable){var o=t.throttle(function(e){var i=!1,o=20,s=window.innerHeight-20;t.hasClass(n,"cc-top")&&e.clientY<o&&(i=!0),t.hasClass(n,"cc-bottom")&&e.clientY>s&&(i=!0),i?t.hasClass(n,"cc-active")||t.addClass(n,"cc-active"):t.hasClass(n,"cc-active")&&t.removeClass(n,"cc-active")},200);this.onMouseMove=o,window.addEventListener("mousemove",o)}}}var g={enabled:!0,container:null,cookie:{name:"cookieconsent_status",path:"/",domain:"",expiryDays:365},onPopupOpen:function(){},onPopupClose:function(){},onInitialise:function(e){},onStatusChange:function(e,t){},onRevokeChoice:function(){},content:{header:"Cookies used on the website!",message:"This website uses cookies to ensure you get the best experience on our website.",dismiss:"Got it!",allow:"Allow cookies",deny:"Decline",link:"Learn more",href:"http://cookiesandyou.com",close:"&#x274c;"},elements:{header:'<span class="cc-header">{{header}}</span>&nbsp;',message:'<span id="cookieconsent:desc" class="cc-message">{{message}}</span>',messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" rel="noopener noreferrer nofollow" target="_blank">{{link}}</a></span>',dismiss:'<a aria-label="dismiss cookie message" role=button tabindex="0" class="cc-btn cc-dismiss">{{dismiss}}</a>',allow:'<a aria-label="allow cookies" role=button tabindex="0"  class="cc-btn cc-allow">{{allow}}</a>',deny:'<a aria-label="deny cookies" role=button tabindex="0" class="cc-btn cc-deny">{{deny}}</a>',link:'<a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" target="_blank">{{link}}</a>',close:'<span aria-label="dismiss cookie message" role=button tabindex="0" class="cc-close">{{close}}</span>'},window:'<div role="dialog" aria-live="polite" aria-label="cookieconsent" aria-describedby="cookieconsent:desc" class="cc-window {{classes}}"><!--googleoff: all-->{{children}}<!--googleon: all--></div>',revokeBtn:'<div class="cc-revoke {{classes}}">Cookie Policy</div>',compliance:{info:'<div class="cc-compliance">{{dismiss}}</div>',"opt-in":'<div class="cc-compliance cc-highlight">{{dismiss}}{{allow}}</div>',"opt-out":'<div class="cc-compliance cc-highlight">{{deny}}{{dismiss}}</div>'},type:"info",layouts:{basic:"{{messagelink}}{{compliance}}","basic-close":"{{messagelink}}{{compliance}}{{close}}","basic-header":"{{header}}{{message}}{{link}}{{compliance}}"},layout:"basic",position:"bottom",theme:"block","static":!1,palette:null,revokable:!1,animateRevokable:!0,showLink:!0,dismissOnScroll:!1,dismissOnTimeout:!1,autoOpen:!0,autoAttach:!0,whitelistPage:[],blacklistPage:[],overrideHTML:null};return n.prototype.initialise=function(e){this.options&&this.destroy(),t.deepExtend(this.options={},g),t.isPlainObject(e)&&t.deepExtend(this.options,e),r.call(this)&&(this.options.enabled=!1),m(this.options.blacklistPage,location.pathname)&&(this.options.enabled=!1),m(this.options.whitelistPage,location.pathname)&&(this.options.enabled=!0);var i=this.options.window.replace("{{classes}}",c.call(this).join(" ")).replace("{{children}}",l.call(this)),n=this.options.overrideHTML;if("string"==typeof n&&n.length&&(i=n),this.options["static"]){var o=u.call(this,'<div class="cc-grower">'+i+"</div>");o.style.display="",this.element=o.firstChild,this.element.style.display="none",t.addClass(this.element,"cc-invisible")}else this.element=u.call(this,i);b.call(this),y.call(this),this.options.autoOpen&&this.autoOpen()},n.prototype.destroy=function(){this.onButtonClick&&this.element&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null),this.dismissTimeout&&(clearTimeout(this.dismissTimeout),this.dismissTimeout=null),this.onWindowScroll&&(window.removeEventListener("scroll",this.onWindowScroll),this.onWindowScroll=null),this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.revokeBtn&&this.revokeBtn.parentNode&&this.revokeBtn.parentNode.removeChild(this.revokeBtn),this.revokeBtn=null,f(this.options.palette),this.options=null},n.prototype.open=function(t){if(this.element)return this.isOpen()||(e.hasTransition?this.fadeIn():this.element.style.display="",this.options.revokable&&this.toggleRevokeButton(),this.options.onPopupOpen.call(this)),this},n.prototype.close=function(t){if(this.element)return this.isOpen()&&(e.hasTransition?this.fadeOut():this.element.style.display="none",t&&this.options.revokable&&this.toggleRevokeButton(!0),this.options.onPopupClose.call(this)),this},n.prototype.fadeIn=function(){var i=this.element;if(e.hasTransition&&i&&(this.afterTransition&&s.call(this,i),t.hasClass(i,"cc-invisible"))){if(i.style.display="",this.options["static"]){var n=this.element.clientHeight;this.element.parentNode.style.maxHeight=n+"px"}var r=20;this.openingTimeout=setTimeout(o.bind(this,i),r)}},n.prototype.fadeOut=function(){var i=this.element;e.hasTransition&&i&&(this.openingTimeout&&(clearTimeout(this.openingTimeout),o.bind(this,i)),t.hasClass(i,"cc-invisible")||(this.options["static"]&&(this.element.parentNode.style.maxHeight=""),this.afterTransition=s.bind(this,i),i.addEventListener(e.transitionEnd,this.afterTransition),t.addClass(i,"cc-invisible")))},n.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&(!e.hasTransition||!t.hasClass(this.element,"cc-invisible"))},n.prototype.toggleRevokeButton=function(e){this.revokeBtn&&(this.revokeBtn.style.display=e?"":"none")},n.prototype.revokeChoice=function(e){this.options.enabled=!0,this.clearStatus(),this.options.onRevokeChoice.call(this),e||this.autoOpen()},n.prototype.hasAnswered=function(t){return Object.keys(e.status).indexOf(this.getStatus())>=0},n.prototype.hasConsented=function(t){var i=this.getStatus();return i==e.status.allow||i==e.status.dismiss},n.prototype.autoOpen=function(e){!this.hasAnswered()&&this.options.enabled&&this.open()},n.prototype.setStatus=function(i){var n=this.options.cookie,o=t.getCookie(n.name),s=Object.keys(e.status).indexOf(o)>=0;Object.keys(e.status).indexOf(i)>=0?(t.setCookie(n.name,i,n.expiryDays,n.domain,n.path),this.options.onStatusChange.call(this,i,s)):this.clearStatus()},n.prototype.getStatus=function(){return t.getCookie(this.options.cookie.name)},n.prototype.clearStatus=function(){var e=this.options.cookie;t.setCookie(e.name,"",-1,e.domain,e.path)},n}(),e.Location=function(){function e(e){t.deepExtend(this.options={},s),t.isPlainObject(e)&&t.deepExtend(this.options,e),this.currentServiceIndex=-1}function i(e,t,i){var n,o=document.createElement("script");o.type="text/"+(e.type||"javascript"),o.src=e.src||e,o.async=!1,o.onreadystatechange=o.onload=function(){var e=o.readyState;clearTimeout(n),t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t(),o.onreadystatechange=o.onload=null)},document.body.appendChild(o),n=setTimeout(function(){t.done=!0,t(),o.onreadystatechange=o.onload=null},i)}function n(e,t,i,n,o){var s=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");if(s.open(n?"POST":"GET",e,1),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Array.isArray(o))for(var r=0,a=o.length;r<a;++r){var c=o[r].split(":",2);s.setRequestHeader(c[0].replace(/^\s+|\s+$/g,""),c[1].replace(/^\s+|\s+$/g,""))}"function"==typeof t&&(s.onreadystatechange=function(){s.readyState>3&&t(s)}),s.send(n)}function o(e){return new Error("Error ["+(e.code||"UNKNOWN")+"]: "+e.error)}var s={timeout:5e3,services:["freegeoip","ipinfo","maxmind"],serviceDefinitions:{freegeoip:function(){return{url:"//freegeoip.net/json/?callback={callback}",isScript:!0,callback:function(e,t){try{var i=JSON.parse(t);return i.error?o(i):{code:i.country_code}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},ipinfo:function(){return{url:"//ipinfo.io",headers:["Accept: application/json"],callback:function(e,t){try{var i=JSON.parse(t);return i.error?o(i):{code:i.country}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},ipinfodb:function(e){return{url:"//api.ipinfodb.com/v3/ip-country/?key={api_key}&format=json&callback={callback}",isScript:!0,callback:function(e,t){try{var i=JSON.parse(t);return"ERROR"==i.statusCode?o({error:i.statusMessage}):{code:i.countryCode}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},maxmind:function(){return{url:"//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js",isScript:!0,callback:function(e){return window.geoip2?void geoip2.country(function(t){try{e({code:t.country.iso_code})}catch(i){e(o(i))}},function(t){e(o(t))}):void e(new Error("Unexpected response format. The downloaded script should have exported `geoip2` to the global scope"))}}}}};return e.prototype.getNextService=function(){var e;do e=this.getServiceByIdx(++this.currentServiceIndex);while(this.currentServiceIndex<this.options.services.length&&!e);return e},e.prototype.getServiceByIdx=function(e){var i=this.options.services[e];if("function"==typeof i){var n=i();return n.name&&t.deepExtend(n,this.options.serviceDefinitions[n.name](n)),n}return"string"==typeof i?this.options.serviceDefinitions[i]():t.isPlainObject(i)?this.options.serviceDefinitions[i.name](i):null},e.prototype.locate=function(e,t){var i=this.getNextService();return i?(this.callbackComplete=e,this.callbackError=t,void this.runService(i,this.runNextServiceOnError.bind(this))):void t(new Error("No services to run"))},e.prototype.setupUrl=function(e){var t=this.getCurrentServiceOpts();return e.url.replace(/\{(.*?)\}/g,function(i,n){if("callback"===n){var o="callback"+Date.now();return window[o]=function(t){e.__JSONP_DATA=JSON.stringify(t)},o}if(n in t.interpolateUrl)return t.interpolateUrl[n]})},e.prototype.runService=function(e,t){var o=this;if(e&&e.url&&e.callback){var s=e.isScript?i:n,r=this.setupUrl(e);s(r,function(i){var n=i?i.responseText:"";e.__JSONP_DATA&&(n=e.__JSONP_DATA,delete e.__JSONP_DATA),o.runServiceCallback.call(o,t,e,n)},this.options.timeout,e.data,e.headers)}},e.prototype.runServiceCallback=function(e,t,i){var n=this,o=function(t){s||n.onServiceResult.call(n,e,t)},s=t.callback(o,i);s&&this.onServiceResult.call(this,e,s)},e.prototype.onServiceResult=function(e,t){t instanceof Error||t&&t.error?e.call(this,t,null):e.call(this,null,t)},e.prototype.runNextServiceOnError=function(e,t){if(e){this.logError(e);var i=this.getNextService();i?this.runService(i,this.runNextServiceOnError.bind(this)):this.completeService.call(this,this.callbackError,new Error("All services failed"))}else this.completeService.call(this,this.callbackComplete,t)},e.prototype.getCurrentServiceOpts=function(){var e=this.options.services[this.currentServiceIndex];return"string"==typeof e?{name:e}:"function"==typeof e?e():t.isPlainObject(e)?e:{}},e.prototype.completeService=function(e,t){this.currentServiceIndex=-1,e&&e(t)},e.prototype.logError=function(e){var t=this.currentServiceIndex,i=this.getServiceByIdx(t);console.error("The service["+t+"] ("+i.url+") responded with the following error",e)},e}(),e.Law=function(){function e(e){this.initialise.apply(this,arguments)}var i={regionalLaw:!0,hasLaw:["AT","BE","BG","HR","CZ","CY","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","SK","SI","ES","SE","GB","UK"],revokable:["HR","CY","DK","EE","FR","DE","LV","LT","NL","PT","ES"],explicitAction:["HR","IT","ES"]};return e.prototype.initialise=function(e){t.deepExtend(this.options={},i),t.isPlainObject(e)&&t.deepExtend(this.options,e)},e.prototype.get=function(e){var t=this.options;return{hasLaw:t.hasLaw.indexOf(e)>=0,revokable:t.revokable.indexOf(e)>=0,explicitAction:t.explicitAction.indexOf(e)>=0}},e.prototype.applyLaw=function(e,t){var i=this.get(t);return i.hasLaw||(e.enabled=!1),this.options.regionalLaw&&(i.revokable&&(e.revokable=!0),i.explicitAction&&(e.dismissOnScroll=!1,e.dismissOnTimeout=!1)),e},e}(),e.initialise=function(t,i,n){var o=new e.Law(t.law);i||(i=function(){}),n||(n=function(){}),e.getCountryCode(t,function(n){delete t.law,delete t.location,n.code&&(t=o.applyLaw(t,n.code)),i(new e.Popup(t))},function(i){delete t.law,delete t.location,n(i,new e.Popup(t))})},e.getCountryCode=function(t,i,n){if(t.law&&t.law.countryCode)return void i({code:t.law.countryCode});if(t.location){var o=new e.Location(t.location);return void o.locate(function(e){i(e||{})},n)}i({})},e.utils=t,e.hasInitialised=!0,window.cookieconsent=e}}(window.cookieconsent||{});
},{}],2:[function(require,module,exports){
module.exports={
  "version": "0.0.1"
}
},{}],3:[function(require,module,exports){
//      
"use strict";

var CookieManager = function CookieManager () {};

CookieManager.getCookie = function getCookie (name        ) {
	var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
	return v ? v[2] : null;
};
	
/**
	 * Set the cookie value
	 * @param {String} name The name of the cookie.
	 * @param {String} value The value of the cookie.
	 * @param {String} days The numbers of days to expire the cookie.
	 */
CookieManager.setCookie = function setCookie (name        , value        , days        ) {
	var d = new Date;
	d.setTime(d.getTime() + 24*60*60*1000*days);
	document.cookie = name + "=" + value + ";path=/;expires=" + d.toGMTString();
};
	
/**
	 * Delete the cookies
	 * @param {String} name The name of the cookie.
	 */
CookieManager.deleteCookie = function deleteCookie (name        ) { 
	this.setCookie(name, '', -1);  
};

/**
	 * Get all cookies
	 * @returns {Object}
	 */
CookieManager.getAllCookies = function getAllCookies (){
	var cookies = {};
	document.cookie.split(";").forEach(function (item){
		var cookie = item.split("=");
		cookies[cookie[0]] = cookie[1];
	});
	return cookies;
};

module.exports = CookieManager;
},{}],4:[function(require,module,exports){
//      
"use strict";

var cookieconsent = require("cookieconsent");
var cookieManager = require("./cookieManager");
var defaultOptions = require("./defaultOptions");


var CookiesICGC = function CookiesICGC(domain        , gaIds               , options         ) {
		
	var mainOptions = Object.assign({}, defaultOptions, options);

	mainOptions.cookie.domain = domain;
	mainOptions.onInitialise = this.onInit;
	mainOptions.onStatusChange = this.onChange;
	mainOptions.onRevokeChoice = this.onRevoke;
	mainOptions.onPopupOpen = this.onOpen;

	this.areCookiesEnabled = false;
	this.gaDisablePrefix = "ga-disable-";
	this.gaIds = gaIds;
	this.cookiesEnabledHandler = null;
	this.cookiesDisabledHandler = null;
	window.cookieconsent.initialise(mainOptions);
		
};

/**
	 * Callback called when the cookie consent has been initialized.
	 * Enables or disables the cookies depending on if the user has consented or not
	 */
CookiesICGC.prototype.onInit = function onInit () {

	if (this.hasConsented()) {
	        
		this.enableCookies();
			
	    } else {

	    this.disableCookies();
			
	    }

};

/**
	 * Callback called when the cookie consent status has changed.
	 * Enables the cookies if needed
	 */
CookiesICGC.prototype.onChange = function onChange () {

	if (this.hasConsented()) {
		
		enableCookies();

	}

};

/**
	 * Callback called when the cookie consent has been revoked.
	 * Disables the cookies
	 */
CookiesICGC.prototype.onRevoke = function onRevoke () {

	this.disableCookies();

};

/**
	 * Checks if the user has consented
	 * @returns {boolean}
	 */
CookiesICGC.prototype.hasConsented = function hasConsented () {

	var type = window.cookieconsent.options.type;
	var didConsent = window.cookieconsent.hasConsented();

	return type == 'opt-in' && didConsent

};

CookiesICGC.prototype.setCookiesEnableHandler = function setCookiesEnableHandler (callback          ){
	this.cookiesEnabledHandler = callback;
};

CookiesICGC.prototype.enableCookies = function enableCookies () {

	this.areCookiesEnabled = true;
	if("true" === cookieManager.getCookie("gaEnable")){
		this.enableGA();
	}
	if(this.cookiesEnabledHandler){
		this.cookiesEnabledHandler();
	}
};

 CookiesICGC.prototype.setCookiesDisabledHandler = function setCookiesDisabledHandler (callback          ){
	this.cookiesDisabledHandler = callback;
};

CookiesICGC.prototype.disableCookies = function disableCookies () {

	var activeCookies = cookieManager.getAllCookies();
	this.disableGA();

	Object.keys(activeCookies).forEach(
		function(item) {
			cookieManager.deleteCookie(item);
		}
	);

	this.areCookiesEnabled = false;

	this.cookiesDisabledHandler();

};

CookiesICGC.prototype.areCookiesEnabled = function areCookiesEnabled () {

	return this.areCookiesEnabled;

};

CookiesICGC.prototype.enableGA = function enableGA () {

	this.changeGAStatusToDisabled(false);

	cookieManager.setCookie("gaEnable", "true", 365);

};

CookiesICGC.prototype.disableGA = function disableGA () {

	this.changeGAStatusToDisabled(true);

	cookieManager.setCookie("gaEnable", "false", 365);

};

CookiesICGC.prototype.changeGAStatusToDisabled = function changeGAStatusToDisabled (shouldDisable         ) {
		var this$1 = this;


	this.gaIds.forEach(function (gaId) {

		window[("" + (this$1.gaDisablePrefix) + gaId)] = shouldDisable;

	});

};

module.exports = CookiesICGC;
},{"./cookieManager":3,"./defaultOptions":5,"cookieconsent":1}],5:[function(require,module,exports){
module.exports = {
	enabled: true,
	type: 'opt-in',
	cookie: {
		domain: 'localhost',
		expiryDays: 365
	},
	position: 'bottom',
	compliance: {
	  'info': '<div class="cc-compliance">{{dismiss}}</div>',
	  'opt-in': '<div class="cc-compliance cc-highlight">{{deny}}{{allow}}</div>',
	  'opt-out': '<div class="cc-compliance cc-highlight">{{deny}}{{dismiss}}</div>',
	},
	palette:{
	  popup: {background: "#222222"},
	  button: {background: "#00b050"}
	},
	revokable:true,
	revokeBtn: '<div class="cc-revoke {{classes}}">Revocar</div>',
	content: {
	  message: "Per tal de fer el seguiment de visites al nostre lloc web, utilitzem galetes. En cap cas emmagatzemem la vostra informació personal",
	  allow: "Acceptar",
	  dismiss: "Entiendo",
	  deny: "Decline",
	  link: "política de galetes",
	  href: 'http://www.icgc.cat/L-ICGC/Sobre-l-ICGC/Politiques/Politica-de-proteccio-de-dades-personals/Politica-de-galetes-cookies',
	},
	showLink: true,
	dismissOnScroll: false,
	law: {
		countryCode: "ES",
		regionalLaw: true
	}
};
},{}],6:[function(require,module,exports){
//      
"use strict";

var version         = require("../package.json").version;
var CookiesICGC = require("./cookiesIcgc");

module.exports = {
	version: version,
	CookiesICGC: CookiesICGC
};

/**
 * The version of the project in use as specified in `package.json`,
 * `CHANGELOG.md`, and the GitHub release.
 *
 * @var {string} version
 */
},{"../package.json":2,"./cookiesIcgc":4}]},{},[6])(6)
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvY29va2llY29uc2VudC9idWlsZC9jb29raWVjb25zZW50Lm1pbi5qcyIsInBhY2thZ2UuanNvbiIsIkU6L3VzdWFyaXMvdy5zemN6ZXJiYW4vY29va2llc2dkcHIvc3JjL2Nvb2tpZU1hbmFnZXIuanMiLCJFOi91c3VhcmlzL3cuc3pjemVyYmFuL2Nvb2tpZXNnZHByL3NyYy9jb29raWVzSWNnYy5qcyIsIkU6L3VzdWFyaXMvdy5zemN6ZXJiYW4vY29va2llc2dkcHIvc3JjL2RlZmF1bHRPcHRpb25zLmpzIiwiRTovdXN1YXJpcy93LnN6Y3plcmJhbi9jb29raWVzZ2Rwci9zcmMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQSxZQUFZLENBQUM7O0FBRWIsSUFBTSxhQUFhOztjQU9YLCtCQUFTLENBQUMsSUFBSSxVQUFVO0NBQy9CLEFBQUMsR0FBSyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxHQUFHLGVBQWUsQ0FBQyxDQUFDO0NBQ3JFLEFBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUN6QixBQUFDLEVBQUM7O0FBRUYsQUFBQzs7Ozs7O0FBTUQsY0FBUSwrQkFBUyxDQUFDLElBQUksVUFBVSxLQUFLLFVBQVUsSUFBSSxVQUFVO0NBQzVELEFBQUMsR0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQztDQUNwQixBQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUM3QyxBQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcs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b3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiIWZ1bmN0aW9uKGUpe2lmKCFlLmhhc0luaXRpYWxpc2VkKXt2YXIgdD17ZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLFwiXFxcXCQmXCIpfSxoYXNDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBpPVwiIFwiO3JldHVybiAxPT09ZS5ub2RlVHlwZSYmKGkrZS5jbGFzc05hbWUraSkucmVwbGFjZSgvW1xcblxcdF0vZyxpKS5pbmRleE9mKGkrdCtpKT49MH0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSx0KXtlLmNsYXNzTmFtZSs9XCIgXCIrdH0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgaT1uZXcgUmVnRXhwKFwiXFxcXGJcIit0aGlzLmVzY2FwZVJlZ0V4cCh0KStcIlxcXFxiXCIpO2UuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnJlcGxhY2UoaSxcIlwiKX0saW50ZXJwb2xhdGVTdHJpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgaT0ve3soW2Etel1bYS16MC05XFwtX10qKX19L2dpO3JldHVybiBlLnJlcGxhY2UoaSxmdW5jdGlvbihlKXtyZXR1cm4gdChhcmd1bWVudHNbMV0pfHxcIlwifSl9LGdldENvb2tpZTpmdW5jdGlvbihlKXt2YXIgdD1cIjsgXCIrZG9jdW1lbnQuY29va2llLGk9dC5zcGxpdChcIjsgXCIrZStcIj1cIik7cmV0dXJuIDIhPWkubGVuZ3RoP3ZvaWQgMDppLnBvcCgpLnNwbGl0KFwiO1wiKS5zaGlmdCgpfSxzZXRDb29raWU6ZnVuY3Rpb24oZSx0LGksbixvKXt2YXIgcz1uZXcgRGF0ZTtzLnNldERhdGUocy5nZXREYXRlKCkrKGl8fDM2NSkpO3ZhciByPVtlK1wiPVwiK3QsXCJleHBpcmVzPVwiK3MudG9VVENTdHJpbmcoKSxcInBhdGg9XCIrKG98fFwiL1wiKV07biYmci5wdXNoKFwiZG9tYWluPVwiK24pLGRvY3VtZW50LmNvb2tpZT1yLmpvaW4oXCI7XCIpfSxkZWVwRXh0ZW5kOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGkgaW4gZSYmdGhpcy5pc1BsYWluT2JqZWN0KGVbaV0pJiZ0aGlzLmlzUGxhaW5PYmplY3QodFtpXSk/dGhpcy5kZWVwRXh0ZW5kKGVbaV0sdFtpXSk6ZVtpXT10W2ldKTtyZXR1cm4gZX0sdGhyb3R0bGU6ZnVuY3Rpb24oZSx0KXt2YXIgaT0hMTtyZXR1cm4gZnVuY3Rpb24oKXtpfHwoZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT0hMX0sdCkpfX0saGFzaDpmdW5jdGlvbihlKXt2YXIgdCxpLG4sbz0wO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbztmb3IodD0wLG49ZS5sZW5ndGg7dDxuOysrdClpPWUuY2hhckNvZGVBdCh0KSxvPShvPDw1KS1vK2ksb3w9MDtyZXR1cm4gb30sbm9ybWFsaXNlSGV4OmZ1bmN0aW9uKGUpe3JldHVyblwiI1wiPT1lWzBdJiYoZT1lLnN1YnN0cigxKSksMz09ZS5sZW5ndGgmJihlPWVbMF0rZVswXStlWzFdK2VbMV0rZVsyXStlWzJdKSxlfSxnZXRDb250cmFzdDpmdW5jdGlvbihlKXtlPXRoaXMubm9ybWFsaXNlSGV4KGUpO3ZhciB0PXBhcnNlSW50KGUuc3Vic3RyKDAsMiksMTYpLGk9cGFyc2VJbnQoZS5zdWJzdHIoMiwyKSwxNiksbj1wYXJzZUludChlLnN1YnN0cig0LDIpLDE2KSxvPSgyOTkqdCs1ODcqaSsxMTQqbikvMWUzO3JldHVybiBvPj0xMjg/XCIjMDAwXCI6XCIjZmZmXCJ9LGdldEx1bWluYW5jZTpmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludCh0aGlzLm5vcm1hbGlzZUhleChlKSwxNiksaT0zOCxuPSh0Pj4xNikraSxvPSh0Pj44JjI1NSkraSxzPSgyNTUmdCkraSxyPSgxNjc3NzIxNis2NTUzNioobjwyNTU/bjwxPzA6bjoyNTUpKzI1NioobzwyNTU/bzwxPzA6bzoyNTUpKyhzPDI1NT9zPDE/MDpzOjI1NSkpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtyZXR1cm5cIiNcIityfSxpc01vYmlsZTpmdW5jdGlvbigpe3JldHVybi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJmUuY29uc3RydWN0b3I9PU9iamVjdH19O2Uuc3RhdHVzPXtkZW55OlwiZGVueVwiLGFsbG93OlwiYWxsb3dcIixkaXNtaXNzOlwiZGlzbWlzc1wifSxlLnRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHQ9e3Q6XCJ0cmFuc2l0aW9uZW5kXCIsT1Q6XCJvVHJhbnNpdGlvbkVuZFwiLG1zVDpcIk1TVHJhbnNpdGlvbkVuZFwiLE1velQ6XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VDpcIndlYmtpdFRyYW5zaXRpb25FbmRcIn07Zm9yKHZhciBpIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShpKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuc3R5bGVbaStcInJhbnNpdGlvblwiXSlyZXR1cm4gdFtpXTtyZXR1cm5cIlwifSgpLGUuaGFzVHJhbnNpdGlvbj0hIWUudHJhbnNpdGlvbkVuZDt2YXIgaT1PYmplY3Qua2V5cyhlLnN0YXR1cykubWFwKHQuZXNjYXBlUmVnRXhwKTtlLmN1c3RvbVN0eWxlcz17fSxlLlBvcHVwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMuaW5pdGlhbGlzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbyhlKXt0aGlzLm9wZW5pbmdUaW1lb3V0PW51bGwsdC5yZW1vdmVDbGFzcyhlLFwiY2MtaW52aXNpYmxlXCIpfWZ1bmN0aW9uIHModCl7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLnRyYW5zaXRpb25FbmQsdGhpcy5hZnRlclRyYW5zaXRpb24pLHRoaXMuYWZ0ZXJUcmFuc2l0aW9uPW51bGx9ZnVuY3Rpb24gcigpe3ZhciB0PXRoaXMub3B0aW9ucy5vbkluaXRpYWxpc2UuYmluZCh0aGlzKTtpZighd2luZG93Lm5hdmlnYXRvci5jb29raWVFbmFibGVkKXJldHVybiB0KGUuc3RhdHVzLmRlbnkpLCEwO2lmKHdpbmRvdy5Db29raWVzT0t8fHdpbmRvdy5uYXZpZ2F0b3IuQ29va2llc09LKXJldHVybiB0KGUuc3RhdHVzLmFsbG93KSwhMDt2YXIgaT1PYmplY3Qua2V5cyhlLnN0YXR1cyksbj10aGlzLmdldFN0YXR1cygpLG89aS5pbmRleE9mKG4pPj0wO3JldHVybiBvJiZ0KG4pLG99ZnVuY3Rpb24gYSgpe3ZhciBlPXRoaXMub3B0aW9ucy5wb3NpdGlvbi5zcGxpdChcIi1cIiksdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QucHVzaChcImNjLVwiK2UpfSksdH1mdW5jdGlvbiBjKCl7dmFyIGU9dGhpcy5vcHRpb25zLGk9XCJ0b3BcIj09ZS5wb3NpdGlvbnx8XCJib3R0b21cIj09ZS5wb3NpdGlvbj9cImJhbm5lclwiOlwiZmxvYXRpbmdcIjt0LmlzTW9iaWxlKCkmJihpPVwiZmxvYXRpbmdcIik7dmFyIG49W1wiY2MtXCIraSxcImNjLXR5cGUtXCIrZS50eXBlLFwiY2MtdGhlbWUtXCIrZS50aGVtZV07ZVtcInN0YXRpY1wiXSYmbi5wdXNoKFwiY2Mtc3RhdGljXCIpLG4ucHVzaC5hcHBseShuLGEuY2FsbCh0aGlzKSk7cC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLnBhbGV0dGUpO3JldHVybiB0aGlzLmN1c3RvbVN0eWxlU2VsZWN0b3ImJm4ucHVzaCh0aGlzLmN1c3RvbVN0eWxlU2VsZWN0b3IpLG59ZnVuY3Rpb24gbCgpe3ZhciBlPXt9LGk9dGhpcy5vcHRpb25zO2kuc2hvd0xpbmt8fChpLmVsZW1lbnRzLmxpbms9XCJcIixpLmVsZW1lbnRzLm1lc3NhZ2VsaW5rPWkuZWxlbWVudHMubWVzc2FnZSksT2JqZWN0LmtleXMoaS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbihuKXtlW25dPXQuaW50ZXJwb2xhdGVTdHJpbmcoaS5lbGVtZW50c1tuXSxmdW5jdGlvbihlKXt2YXIgdD1pLmNvbnRlbnRbZV07cmV0dXJuIGUmJlwic3RyaW5nXCI9PXR5cGVvZiB0JiZ0Lmxlbmd0aD90OlwiXCJ9KX0pO3ZhciBuPWkuY29tcGxpYW5jZVtpLnR5cGVdO258fChuPWkuY29tcGxpYW5jZS5pbmZvKSxlLmNvbXBsaWFuY2U9dC5pbnRlcnBvbGF0ZVN0cmluZyhuLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSk7dmFyIG89aS5sYXlvdXRzW2kubGF5b3V0XTtyZXR1cm4gb3x8KG89aS5sYXlvdXRzLmJhc2ljKSx0LmludGVycG9sYXRlU3RyaW5nKG8sZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX1mdW5jdGlvbiB1KGkpe3ZhciBuPXRoaXMub3B0aW9ucyxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikscz1uLmNvbnRhaW5lciYmMT09PW4uY29udGFpbmVyLm5vZGVUeXBlP24uY29udGFpbmVyOmRvY3VtZW50LmJvZHk7by5pbm5lckhUTUw9aTt2YXIgcj1vLmNoaWxkcmVuWzBdO3JldHVybiByLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdC5oYXNDbGFzcyhyLFwiY2Mtd2luZG93XCIpJiZlLmhhc1RyYW5zaXRpb24mJnQuYWRkQ2xhc3MocixcImNjLWludmlzaWJsZVwiKSx0aGlzLm9uQnV0dG9uQ2xpY2s9aC5iaW5kKHRoaXMpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkJ1dHRvbkNsaWNrKSxuLmF1dG9BdHRhY2gmJihzLmZpcnN0Q2hpbGQ/cy5pbnNlcnRCZWZvcmUocixzLmZpcnN0Q2hpbGQpOnMuYXBwZW5kQ2hpbGQocikpLHJ9ZnVuY3Rpb24gaChuKXt2YXIgbz1uLnRhcmdldDtpZih0Lmhhc0NsYXNzKG8sXCJjYy1idG5cIikpe3ZhciBzPW8uY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoXCJcXFxcYmNjLShcIitpLmpvaW4oXCJ8XCIpK1wiKVxcXFxiXCIpKSxyPXMmJnNbMV18fCExO3ImJih0aGlzLnNldFN0YXR1cyhyKSx0aGlzLmNsb3NlKCEwKSl9dC5oYXNDbGFzcyhvLFwiY2MtY2xvc2VcIikmJih0aGlzLnNldFN0YXR1cyhlLnN0YXR1cy5kaXNtaXNzKSx0aGlzLmNsb3NlKCEwKSksdC5oYXNDbGFzcyhvLFwiY2MtcmV2b2tlXCIpJiZ0aGlzLnJldm9rZUNob2ljZSgpfWZ1bmN0aW9uIHAoZSl7dmFyIGk9dC5oYXNoKEpTT04uc3RyaW5naWZ5KGUpKSxuPVwiY2MtY29sb3Itb3ZlcnJpZGUtXCIraSxvPXQuaXNQbGFpbk9iamVjdChlKTtyZXR1cm4gdGhpcy5jdXN0b21TdHlsZVNlbGVjdG9yPW8/bjpudWxsLG8mJmQoaSxlLFwiLlwiK24pLG99ZnVuY3Rpb24gZChpLG4sbyl7aWYoZS5jdXN0b21TdHlsZXNbaV0pcmV0dXJuIHZvaWQrK2UuY3VzdG9tU3R5bGVzW2ldLnJlZmVyZW5jZXM7dmFyIHM9e30scj1uLnBvcHVwLGE9bi5idXR0b24sYz1uLmhpZ2hsaWdodDtyJiYoci50ZXh0PXIudGV4dD9yLnRleHQ6dC5nZXRDb250cmFzdChyLmJhY2tncm91bmQpLHIubGluaz1yLmxpbms/ci5saW5rOnIudGV4dCxzW28rXCIuY2Mtd2luZG93XCJdPVtcImNvbG9yOiBcIityLnRleHQsXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIityLmJhY2tncm91bmRdLHNbbytcIi5jYy1yZXZva2VcIl09W1wiY29sb3I6IFwiK3IudGV4dCxcImJhY2tncm91bmQtY29sb3I6IFwiK3IuYmFja2dyb3VuZF0sc1tvK1wiIC5jYy1saW5rLFwiK28rXCIgLmNjLWxpbms6YWN0aXZlLFwiK28rXCIgLmNjLWxpbms6dmlzaXRlZFwiXT1bXCJjb2xvcjogXCIrci5saW5rXSxhJiYoYS50ZXh0PWEudGV4dD9hLnRleHQ6dC5nZXRDb250cmFzdChhLmJhY2tncm91bmQpLGEuYm9yZGVyPWEuYm9yZGVyP2EuYm9yZGVyOlwidHJhbnNwYXJlbnRcIixzW28rXCIgLmNjLWJ0blwiXT1bXCJjb2xvcjogXCIrYS50ZXh0LFwiYm9yZGVyLWNvbG9yOiBcIithLmJvcmRlcixcImJhY2tncm91bmQtY29sb3I6IFwiK2EuYmFja2dyb3VuZF0sXCJ0cmFuc3BhcmVudFwiIT1hLmJhY2tncm91bmQmJihzW28rXCIgLmNjLWJ0bjpob3ZlciwgXCIrbytcIiAuY2MtYnRuOmZvY3VzXCJdPVtcImJhY2tncm91bmQtY29sb3I6IFwiK3YoYS5iYWNrZ3JvdW5kKV0pLGM/KGMudGV4dD1jLnRleHQ/Yy50ZXh0OnQuZ2V0Q29udHJhc3QoYy5iYWNrZ3JvdW5kKSxjLmJvcmRlcj1jLmJvcmRlcj9jLmJvcmRlcjpcInRyYW5zcGFyZW50XCIsc1tvK1wiIC5jYy1oaWdobGlnaHQgLmNjLWJ0bjpmaXJzdC1jaGlsZFwiXT1bXCJjb2xvcjogXCIrYy50ZXh0LFwiYm9yZGVyLWNvbG9yOiBcIitjLmJvcmRlcixcImJhY2tncm91bmQtY29sb3I6IFwiK2MuYmFja2dyb3VuZF0pOnNbbytcIiAuY2MtaGlnaGxpZ2h0IC5jYy1idG46Zmlyc3QtY2hpbGRcIl09W1wiY29sb3I6IFwiK3IudGV4dF0pKTt2YXIgbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsKSxlLmN1c3RvbVN0eWxlc1tpXT17cmVmZXJlbmNlczoxLGVsZW1lbnQ6bC5zaGVldH07dmFyIHU9LTE7Zm9yKHZhciBoIGluIHMpcy5oYXNPd25Qcm9wZXJ0eShoKSYmbC5zaGVldC5pbnNlcnRSdWxlKGgrXCJ7XCIrc1toXS5qb2luKFwiO1wiKStcIn1cIiwrK3UpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGU9dC5ub3JtYWxpc2VIZXgoZSksXCIwMDAwMDBcIj09ZT9cIiMyMjJcIjp0LmdldEx1bWluYW5jZShlKX1mdW5jdGlvbiBmKGkpe2lmKHQuaXNQbGFpbk9iamVjdChpKSl7dmFyIG49dC5oYXNoKEpTT04uc3RyaW5naWZ5KGkpKSxvPWUuY3VzdG9tU3R5bGVzW25dO2lmKG8mJiEtLW8ucmVmZXJlbmNlcyl7dmFyIHM9by5lbGVtZW50Lm93bmVyTm9kZTtzJiZzLnBhcmVudE5vZGUmJnMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzKSxlLmN1c3RvbVN0eWxlc1tuXT1udWxsfX19ZnVuY3Rpb24gbShlLHQpe2Zvcih2YXIgaT0wLG49ZS5sZW5ndGg7aTxuOysraSl7dmFyIG89ZVtpXTtpZihvIGluc3RhbmNlb2YgUmVnRXhwJiZvLnRlc3QodCl8fFwic3RyaW5nXCI9PXR5cGVvZiBvJiZvLmxlbmd0aCYmbz09PXQpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gYigpe3ZhciB0PXRoaXMuc2V0U3RhdHVzLmJpbmQodGhpcyksaT10aGlzLm9wdGlvbnMuZGlzbWlzc09uVGltZW91dDtcIm51bWJlclwiPT10eXBlb2YgaSYmaT49MCYmKHRoaXMuZGlzbWlzc1RpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KGUuc3RhdHVzLmRpc21pc3MpfSxNYXRoLmZsb29yKGkpKSk7dmFyIG49dGhpcy5vcHRpb25zLmRpc21pc3NPblNjcm9sbDtpZihcIm51bWJlclwiPT10eXBlb2YgbiYmbj49MCl7dmFyIG89ZnVuY3Rpb24oaSl7d2luZG93LnBhZ2VZT2Zmc2V0Pk1hdGguZmxvb3IobikmJih0KGUuc3RhdHVzLmRpc21pc3MpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsbyksdGhpcy5vbldpbmRvd1Njcm9sbD1udWxsKX07dGhpcy5vbldpbmRvd1Njcm9sbD1vLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsbyl9fWZ1bmN0aW9uIHkoKXtpZihcImluZm9cIiE9dGhpcy5vcHRpb25zLnR5cGUmJih0aGlzLm9wdGlvbnMucmV2b2thYmxlPSEwKSx0LmlzTW9iaWxlKCkmJih0aGlzLm9wdGlvbnMuYW5pbWF0ZVJldm9rYWJsZT0hMSksdGhpcy5vcHRpb25zLnJldm9rYWJsZSl7dmFyIGU9YS5jYWxsKHRoaXMpO3RoaXMub3B0aW9ucy5hbmltYXRlUmV2b2thYmxlJiZlLnB1c2goXCJjYy1hbmltYXRlXCIpLHRoaXMuY3VzdG9tU3R5bGVTZWxlY3RvciYmZS5wdXNoKHRoaXMuY3VzdG9tU3R5bGVTZWxlY3Rvcik7dmFyIGk9dGhpcy5vcHRpb25zLnJldm9rZUJ0bi5yZXBsYWNlKFwie3tjbGFzc2VzfX1cIixlLmpvaW4oXCIgXCIpKTt0aGlzLnJldm9rZUJ0bj11LmNhbGwodGhpcyxpKTt2YXIgbj10aGlzLnJldm9rZUJ0bjtpZih0aGlzLm9wdGlvbnMuYW5pbWF0ZVJldm9rYWJsZSl7dmFyIG89dC50aHJvdHRsZShmdW5jdGlvbihlKXt2YXIgaT0hMSxvPTIwLHM9d2luZG93LmlubmVySGVpZ2h0LTIwO3QuaGFzQ2xhc3MobixcImNjLXRvcFwiKSYmZS5jbGllbnRZPG8mJihpPSEwKSx0Lmhhc0NsYXNzKG4sXCJjYy1ib3R0b21cIikmJmUuY2xpZW50WT5zJiYoaT0hMCksaT90Lmhhc0NsYXNzKG4sXCJjYy1hY3RpdmVcIil8fHQuYWRkQ2xhc3MobixcImNjLWFjdGl2ZVwiKTp0Lmhhc0NsYXNzKG4sXCJjYy1hY3RpdmVcIikmJnQucmVtb3ZlQ2xhc3MobixcImNjLWFjdGl2ZVwiKX0sMjAwKTt0aGlzLm9uTW91c2VNb3ZlPW8sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixvKX19fXZhciBnPXtlbmFibGVkOiEwLGNvbnRhaW5lcjpudWxsLGNvb2tpZTp7bmFtZTpcImNvb2tpZWNvbnNlbnRfc3RhdHVzXCIscGF0aDpcIi9cIixkb21haW46XCJcIixleHBpcnlEYXlzOjM2NX0sb25Qb3B1cE9wZW46ZnVuY3Rpb24oKXt9LG9uUG9wdXBDbG9zZTpmdW5jdGlvbigpe30sb25Jbml0aWFsaXNlOmZ1bmN0aW9uKGUpe30sb25TdGF0dXNDaGFuZ2U6ZnVuY3Rpb24oZSx0KXt9LG9uUmV2b2tlQ2hvaWNlOmZ1bmN0aW9uKCl7fSxjb250ZW50OntoZWFkZXI6XCJDb29raWVzIHVzZWQgb24gdGhlIHdlYnNpdGUhXCIsbWVzc2FnZTpcIlRoaXMgd2Vic2l0ZSB1c2VzIGNvb2tpZXMgdG8gZW5zdXJlIHlvdSBnZXQgdGhlIGJlc3QgZXhwZXJpZW5jZSBvbiBvdXIgd2Vic2l0ZS5cIixkaXNtaXNzOlwiR290IGl0IVwiLGFsbG93OlwiQWxsb3cgY29va2llc1wiLGRlbnk6XCJEZWNsaW5lXCIsbGluazpcIkxlYXJuIG1vcmVcIixocmVmOlwiaHR0cDovL2Nvb2tpZXNhbmR5b3UuY29tXCIsY2xvc2U6XCImI3gyNzRjO1wifSxlbGVtZW50czp7aGVhZGVyOic8c3BhbiBjbGFzcz1cImNjLWhlYWRlclwiPnt7aGVhZGVyfX08L3NwYW4+Jm5ic3A7JyxtZXNzYWdlOic8c3BhbiBpZD1cImNvb2tpZWNvbnNlbnQ6ZGVzY1wiIGNsYXNzPVwiY2MtbWVzc2FnZVwiPnt7bWVzc2FnZX19PC9zcGFuPicsbWVzc2FnZWxpbms6JzxzcGFuIGlkPVwiY29va2llY29uc2VudDpkZXNjXCIgY2xhc3M9XCJjYy1tZXNzYWdlXCI+e3ttZXNzYWdlfX0gPGEgYXJpYS1sYWJlbD1cImxlYXJuIG1vcmUgYWJvdXQgY29va2llc1wiIHJvbGU9YnV0dG9uIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwiY2MtbGlua1wiIGhyZWY9XCJ7e2hyZWZ9fVwiIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXIgbm9mb2xsb3dcIiB0YXJnZXQ9XCJfYmxhbmtcIj57e2xpbmt9fTwvYT48L3NwYW4+JyxkaXNtaXNzOic8YSBhcmlhLWxhYmVsPVwiZGlzbWlzcyBjb29raWUgbWVzc2FnZVwiIHJvbGU9YnV0dG9uIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwiY2MtYnRuIGNjLWRpc21pc3NcIj57e2Rpc21pc3N9fTwvYT4nLGFsbG93Oic8YSBhcmlhLWxhYmVsPVwiYWxsb3cgY29va2llc1wiIHJvbGU9YnV0dG9uIHRhYmluZGV4PVwiMFwiICBjbGFzcz1cImNjLWJ0biBjYy1hbGxvd1wiPnt7YWxsb3d9fTwvYT4nLGRlbnk6JzxhIGFyaWEtbGFiZWw9XCJkZW55IGNvb2tpZXNcIiByb2xlPWJ1dHRvbiB0YWJpbmRleD1cIjBcIiBjbGFzcz1cImNjLWJ0biBjYy1kZW55XCI+e3tkZW55fX08L2E+JyxsaW5rOic8YSBhcmlhLWxhYmVsPVwibGVhcm4gbW9yZSBhYm91dCBjb29raWVzXCIgcm9sZT1idXR0b24gdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJjYy1saW5rXCIgaHJlZj1cInt7aHJlZn19XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3tsaW5rfX08L2E+JyxjbG9zZTonPHNwYW4gYXJpYS1sYWJlbD1cImRpc21pc3MgY29va2llIG1lc3NhZ2VcIiByb2xlPWJ1dHRvbiB0YWJpbmRleD1cIjBcIiBjbGFzcz1cImNjLWNsb3NlXCI+e3tjbG9zZX19PC9zcGFuPid9LHdpbmRvdzonPGRpdiByb2xlPVwiZGlhbG9nXCIgYXJpYS1saXZlPVwicG9saXRlXCIgYXJpYS1sYWJlbD1cImNvb2tpZWNvbnNlbnRcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiY29va2llY29uc2VudDpkZXNjXCIgY2xhc3M9XCJjYy13aW5kb3cge3tjbGFzc2VzfX1cIj48IS0tZ29vZ2xlb2ZmOiBhbGwtLT57e2NoaWxkcmVufX08IS0tZ29vZ2xlb246IGFsbC0tPjwvZGl2PicscmV2b2tlQnRuOic8ZGl2IGNsYXNzPVwiY2MtcmV2b2tlIHt7Y2xhc3Nlc319XCI+Q29va2llIFBvbGljeTwvZGl2PicsY29tcGxpYW5jZTp7aW5mbzonPGRpdiBjbGFzcz1cImNjLWNvbXBsaWFuY2VcIj57e2Rpc21pc3N9fTwvZGl2PicsXCJvcHQtaW5cIjonPGRpdiBjbGFzcz1cImNjLWNvbXBsaWFuY2UgY2MtaGlnaGxpZ2h0XCI+e3tkaXNtaXNzfX17e2FsbG93fX08L2Rpdj4nLFwib3B0LW91dFwiOic8ZGl2IGNsYXNzPVwiY2MtY29tcGxpYW5jZSBjYy1oaWdobGlnaHRcIj57e2Rlbnl9fXt7ZGlzbWlzc319PC9kaXY+J30sdHlwZTpcImluZm9cIixsYXlvdXRzOntiYXNpYzpcInt7bWVzc2FnZWxpbmt9fXt7Y29tcGxpYW5jZX19XCIsXCJiYXNpYy1jbG9zZVwiOlwie3ttZXNzYWdlbGlua319e3tjb21wbGlhbmNlfX17e2Nsb3NlfX1cIixcImJhc2ljLWhlYWRlclwiOlwie3toZWFkZXJ9fXt7bWVzc2FnZX19e3tsaW5rfX17e2NvbXBsaWFuY2V9fVwifSxsYXlvdXQ6XCJiYXNpY1wiLHBvc2l0aW9uOlwiYm90dG9tXCIsdGhlbWU6XCJibG9ja1wiLFwic3RhdGljXCI6ITEscGFsZXR0ZTpudWxsLHJldm9rYWJsZTohMSxhbmltYXRlUmV2b2thYmxlOiEwLHNob3dMaW5rOiEwLGRpc21pc3NPblNjcm9sbDohMSxkaXNtaXNzT25UaW1lb3V0OiExLGF1dG9PcGVuOiEwLGF1dG9BdHRhY2g6ITAsd2hpdGVsaXN0UGFnZTpbXSxibGFja2xpc3RQYWdlOltdLG92ZXJyaWRlSFRNTDpudWxsfTtyZXR1cm4gbi5wcm90b3R5cGUuaW5pdGlhbGlzZT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMmJnRoaXMuZGVzdHJveSgpLHQuZGVlcEV4dGVuZCh0aGlzLm9wdGlvbnM9e30sZyksdC5pc1BsYWluT2JqZWN0KGUpJiZ0LmRlZXBFeHRlbmQodGhpcy5vcHRpb25zLGUpLHIuY2FsbCh0aGlzKSYmKHRoaXMub3B0aW9ucy5lbmFibGVkPSExKSxtKHRoaXMub3B0aW9ucy5ibGFja2xpc3RQYWdlLGxvY2F0aW9uLnBhdGhuYW1lKSYmKHRoaXMub3B0aW9ucy5lbmFibGVkPSExKSxtKHRoaXMub3B0aW9ucy53aGl0ZWxpc3RQYWdlLGxvY2F0aW9uLnBhdGhuYW1lKSYmKHRoaXMub3B0aW9ucy5lbmFibGVkPSEwKTt2YXIgaT10aGlzLm9wdGlvbnMud2luZG93LnJlcGxhY2UoXCJ7e2NsYXNzZXN9fVwiLGMuY2FsbCh0aGlzKS5qb2luKFwiIFwiKSkucmVwbGFjZShcInt7Y2hpbGRyZW59fVwiLGwuY2FsbCh0aGlzKSksbj10aGlzLm9wdGlvbnMub3ZlcnJpZGVIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuJiZuLmxlbmd0aCYmKGk9biksdGhpcy5vcHRpb25zW1wic3RhdGljXCJdKXt2YXIgbz11LmNhbGwodGhpcywnPGRpdiBjbGFzcz1cImNjLWdyb3dlclwiPicraStcIjwvZGl2PlwiKTtvLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLmVsZW1lbnQ9by5maXJzdENoaWxkLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQuYWRkQ2xhc3ModGhpcy5lbGVtZW50LFwiY2MtaW52aXNpYmxlXCIpfWVsc2UgdGhpcy5lbGVtZW50PXUuY2FsbCh0aGlzLGkpO2IuY2FsbCh0aGlzKSx5LmNhbGwodGhpcyksdGhpcy5vcHRpb25zLmF1dG9PcGVuJiZ0aGlzLmF1dG9PcGVuKCl9LG4ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9uQnV0dG9uQ2xpY2smJnRoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQnV0dG9uQ2xpY2spLHRoaXMub25CdXR0b25DbGljaz1udWxsKSx0aGlzLmRpc21pc3NUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuZGlzbWlzc1RpbWVvdXQpLHRoaXMuZGlzbWlzc1RpbWVvdXQ9bnVsbCksdGhpcy5vbldpbmRvd1Njcm9sbCYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vbldpbmRvd1Njcm9sbCksdGhpcy5vbldpbmRvd1Njcm9sbD1udWxsKSx0aGlzLm9uTW91c2VNb3ZlJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW91c2VNb3ZlKSx0aGlzLm9uTW91c2VNb3ZlPW51bGwpLHRoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnBhcmVudE5vZGUmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwsdGhpcy5yZXZva2VCdG4mJnRoaXMucmV2b2tlQnRuLnBhcmVudE5vZGUmJnRoaXMucmV2b2tlQnRuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5yZXZva2VCdG4pLHRoaXMucmV2b2tlQnRuPW51bGwsZih0aGlzLm9wdGlvbnMucGFsZXR0ZSksdGhpcy5vcHRpb25zPW51bGx9LG4ucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7aWYodGhpcy5lbGVtZW50KXJldHVybiB0aGlzLmlzT3BlbigpfHwoZS5oYXNUcmFuc2l0aW9uP3RoaXMuZmFkZUluKCk6dGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLm9wdGlvbnMucmV2b2thYmxlJiZ0aGlzLnRvZ2dsZVJldm9rZUJ1dHRvbigpLHRoaXMub3B0aW9ucy5vblBvcHVwT3Blbi5jYWxsKHRoaXMpKSx0aGlzfSxuLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbih0KXtpZih0aGlzLmVsZW1lbnQpcmV0dXJuIHRoaXMuaXNPcGVuKCkmJihlLmhhc1RyYW5zaXRpb24/dGhpcy5mYWRlT3V0KCk6dGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdCYmdGhpcy5vcHRpb25zLnJldm9rYWJsZSYmdGhpcy50b2dnbGVSZXZva2VCdXR0b24oITApLHRoaXMub3B0aW9ucy5vblBvcHVwQ2xvc2UuY2FsbCh0aGlzKSksdGhpc30sbi5wcm90b3R5cGUuZmFkZUluPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5lbGVtZW50O2lmKGUuaGFzVHJhbnNpdGlvbiYmaSYmKHRoaXMuYWZ0ZXJUcmFuc2l0aW9uJiZzLmNhbGwodGhpcyxpKSx0Lmhhc0NsYXNzKGksXCJjYy1pbnZpc2libGVcIikpKXtpZihpLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLm9wdGlvbnNbXCJzdGF0aWNcIl0pe3ZhciBuPXRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQ7dGhpcy5lbGVtZW50LnBhcmVudE5vZGUuc3R5bGUubWF4SGVpZ2h0PW4rXCJweFwifXZhciByPTIwO3RoaXMub3BlbmluZ1RpbWVvdXQ9c2V0VGltZW91dChvLmJpbmQodGhpcyxpKSxyKX19LG4ucHJvdG90eXBlLmZhZGVPdXQ9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmVsZW1lbnQ7ZS5oYXNUcmFuc2l0aW9uJiZpJiYodGhpcy5vcGVuaW5nVGltZW91dCYmKGNsZWFyVGltZW91dCh0aGlzLm9wZW5pbmdUaW1lb3V0KSxvLmJpbmQodGhpcyxpKSksdC5oYXNDbGFzcyhpLFwiY2MtaW52aXNpYmxlXCIpfHwodGhpcy5vcHRpb25zW1wic3RhdGljXCJdJiYodGhpcy5lbGVtZW50LnBhcmVudE5vZGUuc3R5bGUubWF4SGVpZ2h0PVwiXCIpLHRoaXMuYWZ0ZXJUcmFuc2l0aW9uPXMuYmluZCh0aGlzLGkpLGkuYWRkRXZlbnRMaXN0ZW5lcihlLnRyYW5zaXRpb25FbmQsdGhpcy5hZnRlclRyYW5zaXRpb24pLHQuYWRkQ2xhc3MoaSxcImNjLWludmlzaWJsZVwiKSkpfSxuLnByb3RvdHlwZS5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50JiZcIlwiPT10aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSYmKCFlLmhhc1RyYW5zaXRpb258fCF0Lmhhc0NsYXNzKHRoaXMuZWxlbWVudCxcImNjLWludmlzaWJsZVwiKSl9LG4ucHJvdG90eXBlLnRvZ2dsZVJldm9rZUJ1dHRvbj1mdW5jdGlvbihlKXt0aGlzLnJldm9rZUJ0biYmKHRoaXMucmV2b2tlQnRuLnN0eWxlLmRpc3BsYXk9ZT9cIlwiOlwibm9uZVwiKX0sbi5wcm90b3R5cGUucmV2b2tlQ2hvaWNlPWZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5lbmFibGVkPSEwLHRoaXMuY2xlYXJTdGF0dXMoKSx0aGlzLm9wdGlvbnMub25SZXZva2VDaG9pY2UuY2FsbCh0aGlzKSxlfHx0aGlzLmF1dG9PcGVuKCl9LG4ucHJvdG90eXBlLmhhc0Fuc3dlcmVkPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qua2V5cyhlLnN0YXR1cykuaW5kZXhPZih0aGlzLmdldFN0YXR1cygpKT49MH0sbi5wcm90b3R5cGUuaGFzQ29uc2VudGVkPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0U3RhdHVzKCk7cmV0dXJuIGk9PWUuc3RhdHVzLmFsbG93fHxpPT1lLnN0YXR1cy5kaXNtaXNzfSxuLnByb3RvdHlwZS5hdXRvT3Blbj1mdW5jdGlvbihlKXshdGhpcy5oYXNBbnN3ZXJlZCgpJiZ0aGlzLm9wdGlvbnMuZW5hYmxlZCYmdGhpcy5vcGVuKCl9LG4ucHJvdG90eXBlLnNldFN0YXR1cz1mdW5jdGlvbihpKXt2YXIgbj10aGlzLm9wdGlvbnMuY29va2llLG89dC5nZXRDb29raWUobi5uYW1lKSxzPU9iamVjdC5rZXlzKGUuc3RhdHVzKS5pbmRleE9mKG8pPj0wO09iamVjdC5rZXlzKGUuc3RhdHVzKS5pbmRleE9mKGkpPj0wPyh0LnNldENvb2tpZShuLm5hbWUsaSxuLmV4cGlyeURheXMsbi5kb21haW4sbi5wYXRoKSx0aGlzLm9wdGlvbnMub25TdGF0dXNDaGFuZ2UuY2FsbCh0aGlzLGkscykpOnRoaXMuY2xlYXJTdGF0dXMoKX0sbi5wcm90b3R5cGUuZ2V0U3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0Q29va2llKHRoaXMub3B0aW9ucy5jb29raWUubmFtZSl9LG4ucHJvdG90eXBlLmNsZWFyU3RhdHVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmNvb2tpZTt0LnNldENvb2tpZShlLm5hbWUsXCJcIiwtMSxlLmRvbWFpbixlLnBhdGgpfSxufSgpLGUuTG9jYXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3QuZGVlcEV4dGVuZCh0aGlzLm9wdGlvbnM9e30scyksdC5pc1BsYWluT2JqZWN0KGUpJiZ0LmRlZXBFeHRlbmQodGhpcy5vcHRpb25zLGUpLHRoaXMuY3VycmVudFNlcnZpY2VJbmRleD0tMX1mdW5jdGlvbiBpKGUsdCxpKXt2YXIgbixvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7by50eXBlPVwidGV4dC9cIisoZS50eXBlfHxcImphdmFzY3JpcHRcIiksby5zcmM9ZS5zcmN8fGUsby5hc3luYz0hMSxvLm9ucmVhZHlzdGF0ZWNoYW5nZT1vLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBlPW8ucmVhZHlTdGF0ZTtjbGVhclRpbWVvdXQobiksdC5kb25lfHxlJiYhL2xvYWRlZHxjb21wbGV0ZS8udGVzdChlKXx8KHQuZG9uZT0hMCx0KCksby5vbnJlYWR5c3RhdGVjaGFuZ2U9by5vbmxvYWQ9bnVsbCl9LGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobyksbj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kb25lPSEwLHQoKSxvLm9ucmVhZHlzdGF0ZWNoYW5nZT1vLm9ubG9hZD1udWxsfSxpKX1mdW5jdGlvbiBuKGUsdCxpLG4sbyl7dmFyIHM9bmV3KHdpbmRvdy5YTUxIdHRwUmVxdWVzdHx8d2luZG93LkFjdGl2ZVhPYmplY3QpKFwiTVNYTUwyLlhNTEhUVFAuMy4wXCIpO2lmKHMub3BlbihuP1wiUE9TVFwiOlwiR0VUXCIsZSwxKSxzLnNldFJlcXVlc3RIZWFkZXIoXCJYLVJlcXVlc3RlZC1XaXRoXCIsXCJYTUxIdHRwUmVxdWVzdFwiKSxzLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSxBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcj0wLGE9by5sZW5ndGg7cjxhOysrcil7dmFyIGM9b1tyXS5zcGxpdChcIjpcIiwyKTtzLnNldFJlcXVlc3RIZWFkZXIoY1swXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpLGNbMV0ucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKSl9XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmKHMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7cy5yZWFkeVN0YXRlPjMmJnQocyl9KSxzLnNlbmQobil9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gbmV3IEVycm9yKFwiRXJyb3IgW1wiKyhlLmNvZGV8fFwiVU5LTk9XTlwiKStcIl06IFwiK2UuZXJyb3IpfXZhciBzPXt0aW1lb3V0OjVlMyxzZXJ2aWNlczpbXCJmcmVlZ2VvaXBcIixcImlwaW5mb1wiLFwibWF4bWluZFwiXSxzZXJ2aWNlRGVmaW5pdGlvbnM6e2ZyZWVnZW9pcDpmdW5jdGlvbigpe3JldHVybnt1cmw6XCIvL2ZyZWVnZW9pcC5uZXQvanNvbi8/Y2FsbGJhY2s9e2NhbGxiYWNrfVwiLGlzU2NyaXB0OiEwLGNhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7dHJ5e3ZhciBpPUpTT04ucGFyc2UodCk7cmV0dXJuIGkuZXJyb3I/byhpKTp7Y29kZTppLmNvdW50cnlfY29kZX19Y2F0Y2gobil7cmV0dXJuIG8oe2Vycm9yOlwiSW52YWxpZCByZXNwb25zZSAoXCIrbitcIilcIn0pfX19fSxpcGluZm86ZnVuY3Rpb24oKXtyZXR1cm57dXJsOlwiLy9pcGluZm8uaW9cIixoZWFkZXJzOltcIkFjY2VwdDogYXBwbGljYXRpb24vanNvblwiXSxjYWxsYmFjazpmdW5jdGlvbihlLHQpe3RyeXt2YXIgaT1KU09OLnBhcnNlKHQpO3JldHVybiBpLmVycm9yP28oaSk6e2NvZGU6aS5jb3VudHJ5fX1jYXRjaChuKXtyZXR1cm4gbyh7ZXJyb3I6XCJJbnZhbGlkIHJlc3BvbnNlIChcIituK1wiKVwifSl9fX19LGlwaW5mb2RiOmZ1bmN0aW9uKGUpe3JldHVybnt1cmw6XCIvL2FwaS5pcGluZm9kYi5jb20vdjMvaXAtY291bnRyeS8/a2V5PXthcGlfa2V5fSZmb3JtYXQ9anNvbiZjYWxsYmFjaz17Y2FsbGJhY2t9XCIsaXNTY3JpcHQ6ITAsY2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIGk9SlNPTi5wYXJzZSh0KTtyZXR1cm5cIkVSUk9SXCI9PWkuc3RhdHVzQ29kZT9vKHtlcnJvcjppLnN0YXR1c01lc3NhZ2V9KTp7Y29kZTppLmNvdW50cnlDb2RlfX1jYXRjaChuKXtyZXR1cm4gbyh7ZXJyb3I6XCJJbnZhbGlkIHJlc3BvbnNlIChcIituK1wiKVwifSl9fX19LG1heG1pbmQ6ZnVuY3Rpb24oKXtyZXR1cm57dXJsOlwiLy9qcy5tYXhtaW5kLmNvbS9qcy9hcGlzL2dlb2lwMi92Mi4xL2dlb2lwMi5qc1wiLGlzU2NyaXB0OiEwLGNhbGxiYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuZ2VvaXAyP3ZvaWQgZ2VvaXAyLmNvdW50cnkoZnVuY3Rpb24odCl7dHJ5e2Uoe2NvZGU6dC5jb3VudHJ5Lmlzb19jb2RlfSl9Y2F0Y2goaSl7ZShvKGkpKX19LGZ1bmN0aW9uKHQpe2Uobyh0KSl9KTp2b2lkIGUobmV3IEVycm9yKFwiVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQuIFRoZSBkb3dubG9hZGVkIHNjcmlwdCBzaG91bGQgaGF2ZSBleHBvcnRlZCBgZ2VvaXAyYCB0byB0aGUgZ2xvYmFsIHNjb3BlXCIpKX19fX19O3JldHVybiBlLnByb3RvdHlwZS5nZXROZXh0U2VydmljZT1mdW5jdGlvbigpe3ZhciBlO2RvIGU9dGhpcy5nZXRTZXJ2aWNlQnlJZHgoKyt0aGlzLmN1cnJlbnRTZXJ2aWNlSW5kZXgpO3doaWxlKHRoaXMuY3VycmVudFNlcnZpY2VJbmRleDx0aGlzLm9wdGlvbnMuc2VydmljZXMubGVuZ3RoJiYhZSk7cmV0dXJuIGV9LGUucHJvdG90eXBlLmdldFNlcnZpY2VCeUlkeD1mdW5jdGlvbihlKXt2YXIgaT10aGlzLm9wdGlvbnMuc2VydmljZXNbZV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaSl7dmFyIG49aSgpO3JldHVybiBuLm5hbWUmJnQuZGVlcEV4dGVuZChuLHRoaXMub3B0aW9ucy5zZXJ2aWNlRGVmaW5pdGlvbnNbbi5uYW1lXShuKSksbn1yZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgaT90aGlzLm9wdGlvbnMuc2VydmljZURlZmluaXRpb25zW2ldKCk6dC5pc1BsYWluT2JqZWN0KGkpP3RoaXMub3B0aW9ucy5zZXJ2aWNlRGVmaW5pdGlvbnNbaS5uYW1lXShpKTpudWxsfSxlLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmdldE5leHRTZXJ2aWNlKCk7cmV0dXJuIGk/KHRoaXMuY2FsbGJhY2tDb21wbGV0ZT1lLHRoaXMuY2FsbGJhY2tFcnJvcj10LHZvaWQgdGhpcy5ydW5TZXJ2aWNlKGksdGhpcy5ydW5OZXh0U2VydmljZU9uRXJyb3IuYmluZCh0aGlzKSkpOnZvaWQgdChuZXcgRXJyb3IoXCJObyBzZXJ2aWNlcyB0byBydW5cIikpfSxlLnByb3RvdHlwZS5zZXR1cFVybD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEN1cnJlbnRTZXJ2aWNlT3B0cygpO3JldHVybiBlLnVybC5yZXBsYWNlKC9cXHsoLio/KVxcfS9nLGZ1bmN0aW9uKGksbil7aWYoXCJjYWxsYmFja1wiPT09bil7dmFyIG89XCJjYWxsYmFja1wiK0RhdGUubm93KCk7cmV0dXJuIHdpbmRvd1tvXT1mdW5jdGlvbih0KXtlLl9fSlNPTlBfREFUQT1KU09OLnN0cmluZ2lmeSh0KX0sb31pZihuIGluIHQuaW50ZXJwb2xhdGVVcmwpcmV0dXJuIHQuaW50ZXJwb2xhdGVVcmxbbl19KX0sZS5wcm90b3R5cGUucnVuU2VydmljZT1mdW5jdGlvbihlLHQpe3ZhciBvPXRoaXM7aWYoZSYmZS51cmwmJmUuY2FsbGJhY2spe3ZhciBzPWUuaXNTY3JpcHQ/aTpuLHI9dGhpcy5zZXR1cFVybChlKTtzKHIsZnVuY3Rpb24oaSl7dmFyIG49aT9pLnJlc3BvbnNlVGV4dDpcIlwiO2UuX19KU09OUF9EQVRBJiYobj1lLl9fSlNPTlBfREFUQSxkZWxldGUgZS5fX0pTT05QX0RBVEEpLG8ucnVuU2VydmljZUNhbGxiYWNrLmNhbGwobyx0LGUsbil9LHRoaXMub3B0aW9ucy50aW1lb3V0LGUuZGF0YSxlLmhlYWRlcnMpfX0sZS5wcm90b3R5cGUucnVuU2VydmljZUNhbGxiYWNrPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj10aGlzLG89ZnVuY3Rpb24odCl7c3x8bi5vblNlcnZpY2VSZXN1bHQuY2FsbChuLGUsdCl9LHM9dC5jYWxsYmFjayhvLGkpO3MmJnRoaXMub25TZXJ2aWNlUmVzdWx0LmNhbGwodGhpcyxlLHMpfSxlLnByb3RvdHlwZS5vblNlcnZpY2VSZXN1bHQ9ZnVuY3Rpb24oZSx0KXt0IGluc3RhbmNlb2YgRXJyb3J8fHQmJnQuZXJyb3I/ZS5jYWxsKHRoaXMsdCxudWxsKTplLmNhbGwodGhpcyxudWxsLHQpfSxlLnByb3RvdHlwZS5ydW5OZXh0U2VydmljZU9uRXJyb3I9ZnVuY3Rpb24oZSx0KXtpZihlKXt0aGlzLmxvZ0Vycm9yKGUpO3ZhciBpPXRoaXMuZ2V0TmV4dFNlcnZpY2UoKTtpP3RoaXMucnVuU2VydmljZShpLHRoaXMucnVuTmV4dFNlcnZpY2VPbkVycm9yLmJpbmQodGhpcykpOnRoaXMuY29tcGxldGVTZXJ2aWNlLmNhbGwodGhpcyx0aGlzLmNhbGxiYWNrRXJyb3IsbmV3IEVycm9yKFwiQWxsIHNlcnZpY2VzIGZhaWxlZFwiKSl9ZWxzZSB0aGlzLmNvbXBsZXRlU2VydmljZS5jYWxsKHRoaXMsdGhpcy5jYWxsYmFja0NvbXBsZXRlLHQpfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50U2VydmljZU9wdHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuc2VydmljZXNbdGhpcy5jdXJyZW50U2VydmljZUluZGV4XTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT97bmFtZTplfTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2UoKTp0LmlzUGxhaW5PYmplY3QoZSk/ZTp7fX0sZS5wcm90b3R5cGUuY29tcGxldGVTZXJ2aWNlPWZ1bmN0aW9uKGUsdCl7dGhpcy5jdXJyZW50U2VydmljZUluZGV4PS0xLGUmJmUodCl9LGUucHJvdG90eXBlLmxvZ0Vycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3VycmVudFNlcnZpY2VJbmRleCxpPXRoaXMuZ2V0U2VydmljZUJ5SWR4KHQpO2NvbnNvbGUuZXJyb3IoXCJUaGUgc2VydmljZVtcIit0K1wiXSAoXCIraS51cmwrXCIpIHJlc3BvbmRlZCB3aXRoIHRoZSBmb2xsb3dpbmcgZXJyb3JcIixlKX0sZX0oKSxlLkxhdz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5pbml0aWFsaXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgaT17cmVnaW9uYWxMYXc6ITAsaGFzTGF3OltcIkFUXCIsXCJCRVwiLFwiQkdcIixcIkhSXCIsXCJDWlwiLFwiQ1lcIixcIkRLXCIsXCJFRVwiLFwiRklcIixcIkZSXCIsXCJERVwiLFwiRUxcIixcIkhVXCIsXCJJRVwiLFwiSVRcIixcIkxWXCIsXCJMVFwiLFwiTFVcIixcIk1UXCIsXCJOTFwiLFwiUExcIixcIlBUXCIsXCJTS1wiLFwiU0lcIixcIkVTXCIsXCJTRVwiLFwiR0JcIixcIlVLXCJdLHJldm9rYWJsZTpbXCJIUlwiLFwiQ1lcIixcIkRLXCIsXCJFRVwiLFwiRlJcIixcIkRFXCIsXCJMVlwiLFwiTFRcIixcIk5MXCIsXCJQVFwiLFwiRVNcIl0sZXhwbGljaXRBY3Rpb246W1wiSFJcIixcIklUXCIsXCJFU1wiXX07cmV0dXJuIGUucHJvdG90eXBlLmluaXRpYWxpc2U9ZnVuY3Rpb24oZSl7dC5kZWVwRXh0ZW5kKHRoaXMub3B0aW9ucz17fSxpKSx0LmlzUGxhaW5PYmplY3QoZSkmJnQuZGVlcEV4dGVuZCh0aGlzLm9wdGlvbnMsZSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7cmV0dXJue2hhc0xhdzp0Lmhhc0xhdy5pbmRleE9mKGUpPj0wLHJldm9rYWJsZTp0LnJldm9rYWJsZS5pbmRleE9mKGUpPj0wLGV4cGxpY2l0QWN0aW9uOnQuZXhwbGljaXRBY3Rpb24uaW5kZXhPZihlKT49MH19LGUucHJvdG90eXBlLmFwcGx5TGF3PWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5nZXQodCk7cmV0dXJuIGkuaGFzTGF3fHwoZS5lbmFibGVkPSExKSx0aGlzLm9wdGlvbnMucmVnaW9uYWxMYXcmJihpLnJldm9rYWJsZSYmKGUucmV2b2thYmxlPSEwKSxpLmV4cGxpY2l0QWN0aW9uJiYoZS5kaXNtaXNzT25TY3JvbGw9ITEsZS5kaXNtaXNzT25UaW1lb3V0PSExKSksZX0sZX0oKSxlLmluaXRpYWxpc2U9ZnVuY3Rpb24odCxpLG4pe3ZhciBvPW5ldyBlLkxhdyh0Lmxhdyk7aXx8KGk9ZnVuY3Rpb24oKXt9KSxufHwobj1mdW5jdGlvbigpe30pLGUuZ2V0Q291bnRyeUNvZGUodCxmdW5jdGlvbihuKXtkZWxldGUgdC5sYXcsZGVsZXRlIHQubG9jYXRpb24sbi5jb2RlJiYodD1vLmFwcGx5TGF3KHQsbi5jb2RlKSksaShuZXcgZS5Qb3B1cCh0KSl9LGZ1bmN0aW9uKGkpe2RlbGV0ZSB0LmxhdyxkZWxldGUgdC5sb2NhdGlvbixuKGksbmV3IGUuUG9wdXAodCkpfSl9LGUuZ2V0Q291bnRyeUNvZGU9ZnVuY3Rpb24odCxpLG4pe2lmKHQubGF3JiZ0Lmxhdy5jb3VudHJ5Q29kZSlyZXR1cm4gdm9pZCBpKHtjb2RlOnQubGF3LmNvdW50cnlDb2RlfSk7aWYodC5sb2NhdGlvbil7dmFyIG89bmV3IGUuTG9jYXRpb24odC5sb2NhdGlvbik7cmV0dXJuIHZvaWQgby5sb2NhdGUoZnVuY3Rpb24oZSl7aShlfHx7fSl9LG4pfWkoe30pfSxlLnV0aWxzPXQsZS5oYXNJbml0aWFsaXNlZD0hMCx3aW5kb3cuY29va2llY29uc2VudD1lfX0od2luZG93LmNvb2tpZWNvbnNlbnR8fHt9KTsiLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwidmVyc2lvblwiOiBcIjAuMC4xXCJcbn0iLCIvLyAgICAgIFxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmNsYXNzIENvb2tpZU1hbmFnZXIge1xyXG5cclxuXHQvKipcclxuXHQgKiBnZXQgdGhlIGNvb2tpZSB2YWx1ZVxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb29raWUuXHJcblx0ICogQHJldHVybnMge1N0cmluZ31cclxuXHQgKi9cclxuXHRzdGF0aWMgZ2V0Q29va2llKG5hbWUgICAgICAgICkge1xyXG5cdFx0Y29uc3QgdiA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgnKF58OykgPycgKyBuYW1lICsgJz0oW147XSopKDt8JCknKTtcclxuXHRcdHJldHVybiB2ID8gdlsyXSA6IG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNldCB0aGUgY29va2llIHZhbHVlXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvb2tpZS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBjb29raWUuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRheXMgVGhlIG51bWJlcnMgb2YgZGF5cyB0byBleHBpcmUgdGhlIGNvb2tpZS5cclxuXHQgKi9cclxuXHRzdGF0aWMgc2V0Q29va2llKG5hbWUgICAgICAgICwgdmFsdWUgICAgICAgICwgZGF5cyAgICAgICAgKSB7XHJcblx0XHRjb25zdCBkID0gbmV3IERhdGU7XHJcblx0XHRkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAyNCo2MCo2MCoxMDAwKmRheXMpO1xyXG5cdFx0ZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWUgKyBcIjtwYXRoPS87ZXhwaXJlcz1cIiArIGQudG9HTVRTdHJpbmcoKTtcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogRGVsZXRlIHRoZSBjb29raWVzXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvb2tpZS5cclxuXHQgKi9cclxuXHRzdGF0aWMgZGVsZXRlQ29va2llKG5hbWUgICAgICAgICkgeyBcclxuXHRcdHRoaXMuc2V0Q29va2llKG5hbWUsICcnLCAtMSk7ICBcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBhbGwgY29va2llc1xyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9XHJcblx0ICovXHJcblx0c3RhdGljIGdldEFsbENvb2tpZXMoKXtcclxuXHRcdGNvbnN0IGNvb2tpZXMgPSB7fTtcclxuXHRcdGRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIikuZm9yRWFjaCgoaXRlbSk9PntcclxuXHRcdFx0Y29uc3QgY29va2llID0gaXRlbS5zcGxpdChcIj1cIik7XHJcblx0XHRcdGNvb2tpZXNbY29va2llWzBdXSA9IGNvb2tpZVsxXTtcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGNvb2tpZXM7XHJcblx0fVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvb2tpZU1hbmFnZXI7IiwiLy8gICAgICBcclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBjb29raWVjb25zZW50ID0gcmVxdWlyZShcImNvb2tpZWNvbnNlbnRcIik7XHJcbmNvbnN0IGNvb2tpZU1hbmFnZXIgPSByZXF1aXJlKFwiLi9jb29raWVNYW5hZ2VyXCIpO1xyXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHJlcXVpcmUoXCIuL2RlZmF1bHRPcHRpb25zXCIpO1xyXG5cclxuXHJcbmNsYXNzIENvb2tpZXNJQ0dDIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEEgYENvb2tpZXNJQ0dDYCBvYmplY3QgcmVwcmVzZW50cyB0aGUgb2JqZWN0IHRoYXQgbWFuYWdlcyB0aGUgY29va2llIGNvbnNlbnQgdW5kZXIgdGhlIEV1cm9wZWFuIEdEUFIgbGF3XHJcblx0ICogZGlzYWJsaW5nIEdvb2dsZSBBbmFseXRpY3MgY29va2llcyBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiB0aGF0IHNldHMgdGhlIGNvb2tpZS5cclxuXHQgKiBAcGFyYW0ge0FycmF5PFN0cmluZz59IGdhSWRzIEFuIGFycmF5IHdpdGggdGhlIEdvb2dsZSBBbmFseXRpY3MgaWRzXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9uYWwgb3B0aW9uc1xyXG5cdCAqIEBleGFtcGxlXHJcblx0ICogdmFyIGNvb2tpZXMgPSBuZXcgQ29va2llc0lDR0MoXCJ3d3cuaW5zdGFtYXBzLmNhdFwiLCBbXCJVQS0xMjM0NTY3OC0xXCJdLCB7cG9zaXRpb246IFwidG9wXCIsIGNvbnRlbnQgeyBtZXNzYWdlOiBcIlZvbHMgY29va2llcz9cIiB9fSk7XHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoZG9tYWluICAgICAgICAsIGdhSWRzICAgICAgICAgICAgICAgLCBvcHRpb25zICAgICAgICAgKSB7XHJcblx0XHRcclxuXHRcdGNvbnN0IG1haW5PcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuXHRcdG1haW5PcHRpb25zLmNvb2tpZS5kb21haW4gPSBkb21haW47XHJcblx0XHRtYWluT3B0aW9ucy5vbkluaXRpYWxpc2UgPSB0aGlzLm9uSW5pdDtcclxuXHRcdG1haW5PcHRpb25zLm9uU3RhdHVzQ2hhbmdlID0gdGhpcy5vbkNoYW5nZTtcclxuXHRcdG1haW5PcHRpb25zLm9uUmV2b2tlQ2hvaWNlID0gdGhpcy5vblJldm9rZTtcclxuXHRcdG1haW5PcHRpb25zLm9uUG9wdXBPcGVuID0gdGhpcy5vbk9wZW47XHJcblxyXG5cdFx0dGhpcy5hcmVDb29raWVzRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5nYURpc2FibGVQcmVmaXggPSBcImdhLWRpc2FibGUtXCI7XHJcblx0XHR0aGlzLmdhSWRzID0gZ2FJZHM7XHJcblx0XHR0aGlzLmNvb2tpZXNFbmFibGVkSGFuZGxlciA9IG51bGw7XHJcblx0XHR0aGlzLmNvb2tpZXNEaXNhYmxlZEhhbmRsZXIgPSBudWxsO1xyXG5cdFx0d2luZG93LmNvb2tpZWNvbnNlbnQuaW5pdGlhbGlzZShtYWluT3B0aW9ucyk7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxiYWNrIGNhbGxlZCB3aGVuIHRoZSBjb29raWUgY29uc2VudCBoYXMgYmVlbiBpbml0aWFsaXplZC5cclxuXHQgKiBFbmFibGVzIG9yIGRpc2FibGVzIHRoZSBjb29raWVzIGRlcGVuZGluZyBvbiBpZiB0aGUgdXNlciBoYXMgY29uc2VudGVkIG9yIG5vdFxyXG5cdCAqL1xyXG5cdG9uSW5pdCgpIHtcclxuXHJcblx0XHRpZiAodGhpcy5oYXNDb25zZW50ZWQoKSkge1xyXG5cdCAgICAgICAgXHJcblx0XHRcdHRoaXMuZW5hYmxlQ29va2llcygpO1xyXG5cdFx0XHRcclxuXHQgICAgfSBlbHNlIHtcclxuXHJcblx0ICAgIFx0dGhpcy5kaXNhYmxlQ29va2llcygpO1xyXG5cdFx0XHRcclxuXHQgICAgfVxyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxiYWNrIGNhbGxlZCB3aGVuIHRoZSBjb29raWUgY29uc2VudCBzdGF0dXMgaGFzIGNoYW5nZWQuXHJcblx0ICogRW5hYmxlcyB0aGUgY29va2llcyBpZiBuZWVkZWRcclxuXHQgKi9cclxuXHRvbkNoYW5nZSgpIHtcclxuXHJcblx0XHRpZiAodGhpcy5oYXNDb25zZW50ZWQoKSkge1xyXG5cdFx0XHJcblx0XHRcdGVuYWJsZUNvb2tpZXMoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGJhY2sgY2FsbGVkIHdoZW4gdGhlIGNvb2tpZSBjb25zZW50IGhhcyBiZWVuIHJldm9rZWQuXHJcblx0ICogRGlzYWJsZXMgdGhlIGNvb2tpZXNcclxuXHQgKi9cclxuXHRvblJldm9rZSgpIHtcclxuXHJcblx0XHR0aGlzLmRpc2FibGVDb29raWVzKCk7XHJcblxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIGlmIHRoZSB1c2VyIGhhcyBjb25zZW50ZWRcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKi9cclxuXHRoYXNDb25zZW50ZWQoKSB7XHJcblxyXG5cdFx0Y29uc3QgdHlwZSA9IHdpbmRvdy5jb29raWVjb25zZW50Lm9wdGlvbnMudHlwZTtcclxuXHRcdGNvbnN0IGRpZENvbnNlbnQgPSB3aW5kb3cuY29va2llY29uc2VudC5oYXNDb25zZW50ZWQoKTtcclxuXHJcblx0XHRyZXR1cm4gdHlwZSA9PSAnb3B0LWluJyAmJiBkaWRDb25zZW50XHJcblxyXG5cdH1cclxuXHJcblx0c2V0Q29va2llc0VuYWJsZUhhbmRsZXIoY2FsbGJhY2sgICAgICAgICAgKXtcclxuXHRcdHRoaXMuY29va2llc0VuYWJsZWRIYW5kbGVyID0gY2FsbGJhY2s7XHJcblx0fVxyXG5cclxuXHRlbmFibGVDb29raWVzKCkge1xyXG5cclxuXHRcdHRoaXMuYXJlQ29va2llc0VuYWJsZWQgPSB0cnVlO1xyXG5cdFx0aWYoXCJ0cnVlXCIgPT09IGNvb2tpZU1hbmFnZXIuZ2V0Q29va2llKFwiZ2FFbmFibGVcIikpe1xyXG5cdFx0XHR0aGlzLmVuYWJsZUdBKCk7XHJcblx0XHR9XHJcblx0XHRpZih0aGlzLmNvb2tpZXNFbmFibGVkSGFuZGxlcil7XHJcblx0XHRcdHRoaXMuY29va2llc0VuYWJsZWRIYW5kbGVyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuIFx0c2V0Q29va2llc0Rpc2FibGVkSGFuZGxlcihjYWxsYmFjayAgICAgICAgICApe1xyXG5cdFx0dGhpcy5jb29raWVzRGlzYWJsZWRIYW5kbGVyID0gY2FsbGJhY2s7XHJcblx0fVxyXG5cclxuXHRkaXNhYmxlQ29va2llcygpIHtcclxuXHJcblx0XHRjb25zdCBhY3RpdmVDb29raWVzID0gY29va2llTWFuYWdlci5nZXRBbGxDb29raWVzKCk7XHJcblx0XHR0aGlzLmRpc2FibGVHQSgpO1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKGFjdGl2ZUNvb2tpZXMpLmZvckVhY2goXHJcblx0XHRcdGZ1bmN0aW9uKGl0ZW0pIHtcclxuXHRcdFx0XHRjb29raWVNYW5hZ2VyLmRlbGV0ZUNvb2tpZShpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFyZUNvb2tpZXNFbmFibGVkID0gZmFsc2U7XHJcblxyXG5cdFx0dGhpcy5jb29raWVzRGlzYWJsZWRIYW5kbGVyKCk7XHJcblxyXG5cdH1cclxuXHJcblx0YXJlQ29va2llc0VuYWJsZWQoKSB7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuYXJlQ29va2llc0VuYWJsZWQ7XHJcblxyXG5cdH1cclxuXHJcblx0ZW5hYmxlR0EoKSB7XHJcblxyXG5cdFx0dGhpcy5jaGFuZ2VHQVN0YXR1c1RvRGlzYWJsZWQoZmFsc2UpO1xyXG5cclxuXHRcdGNvb2tpZU1hbmFnZXIuc2V0Q29va2llKFwiZ2FFbmFibGVcIiwgXCJ0cnVlXCIsIDM2NSk7XHJcblxyXG5cdH1cclxuXHJcblx0ZGlzYWJsZUdBKCkge1xyXG5cclxuXHRcdHRoaXMuY2hhbmdlR0FTdGF0dXNUb0Rpc2FibGVkKHRydWUpO1xyXG5cclxuXHRcdGNvb2tpZU1hbmFnZXIuc2V0Q29va2llKFwiZ2FFbmFibGVcIiwgXCJmYWxzZVwiLCAzNjUpO1xyXG5cclxuXHR9XHJcblxyXG5cdGNoYW5nZUdBU3RhdHVzVG9EaXNhYmxlZChzaG91bGREaXNhYmxlICAgICAgICAgKSB7XHJcblxyXG5cdFx0dGhpcy5nYUlkcy5mb3JFYWNoKGdhSWQgPT4ge1xyXG5cclxuXHRcdFx0d2luZG93W2Ake3RoaXMuZ2FEaXNhYmxlUHJlZml4fSR7Z2FJZH1gXSA9IHNob3VsZERpc2FibGU7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHRcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb29raWVzSUNHQzsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuXHRlbmFibGVkOiB0cnVlLFxyXG5cdHR5cGU6ICdvcHQtaW4nLFxyXG5cdGNvb2tpZToge1xyXG5cdFx0ZG9tYWluOiAnbG9jYWxob3N0JyxcclxuXHRcdGV4cGlyeURheXM6IDM2NVxyXG5cdH0sXHJcblx0cG9zaXRpb246ICdib3R0b20nLFxyXG5cdGNvbXBsaWFuY2U6IHtcclxuXHQgICdpbmZvJzogJzxkaXYgY2xhc3M9XCJjYy1jb21wbGlhbmNlXCI+e3tkaXNtaXNzfX08L2Rpdj4nLFxyXG5cdCAgJ29wdC1pbic6ICc8ZGl2IGNsYXNzPVwiY2MtY29tcGxpYW5jZSBjYy1oaWdobGlnaHRcIj57e2Rlbnl9fXt7YWxsb3d9fTwvZGl2PicsXHJcblx0ICAnb3B0LW91dCc6ICc8ZGl2IGNsYXNzPVwiY2MtY29tcGxpYW5jZSBjYy1oaWdobGlnaHRcIj57e2Rlbnl9fXt7ZGlzbWlzc319PC9kaXY+JyxcclxuXHR9LFxyXG5cdHBhbGV0dGU6e1xyXG5cdCAgcG9wdXA6IHtiYWNrZ3JvdW5kOiBcIiMyMjIyMjJcIn0sXHJcblx0ICBidXR0b246IHtiYWNrZ3JvdW5kOiBcIiMwMGIwNTBcIn1cclxuXHR9LFxyXG5cdHJldm9rYWJsZTp0cnVlLFxyXG5cdHJldm9rZUJ0bjogJzxkaXYgY2xhc3M9XCJjYy1yZXZva2Uge3tjbGFzc2VzfX1cIj5SZXZvY2FyPC9kaXY+JyxcclxuXHRjb250ZW50OiB7XHJcblx0ICBtZXNzYWdlOiBcIlBlciB0YWwgZGUgZmVyIGVsIHNlZ3VpbWVudCBkZSB2aXNpdGVzIGFsIG5vc3RyZSBsbG9jIHdlYiwgdXRpbGl0emVtIGdhbGV0ZXMuIEVuIGNhcCBjYXMgZW1tYWdhdHplbWVtIGxhIHZvc3RyYSBpbmZvcm1hY2nDsyBwZXJzb25hbFwiLFxyXG5cdCAgYWxsb3c6IFwiQWNjZXB0YXJcIixcclxuXHQgIGRpc21pc3M6IFwiRW50aWVuZG9cIixcclxuXHQgIGRlbnk6IFwiRGVjbGluZVwiLFxyXG5cdCAgbGluazogXCJwb2zDrXRpY2EgZGUgZ2FsZXRlc1wiLFxyXG5cdCAgaHJlZjogJ2h0dHA6Ly93d3cuaWNnYy5jYXQvTC1JQ0dDL1NvYnJlLWwtSUNHQy9Qb2xpdGlxdWVzL1BvbGl0aWNhLWRlLXByb3RlY2Npby1kZS1kYWRlcy1wZXJzb25hbHMvUG9saXRpY2EtZGUtZ2FsZXRlcy1jb29raWVzJyxcclxuXHR9LFxyXG5cdHNob3dMaW5rOiB0cnVlLFxyXG5cdGRpc21pc3NPblNjcm9sbDogZmFsc2UsXHJcblx0bGF3OiB7XHJcblx0XHRjb3VudHJ5Q29kZTogXCJFU1wiLFxyXG5cdFx0cmVnaW9uYWxMYXc6IHRydWVcclxuXHR9XHJcbn07IiwiLy8gICAgICBcclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCB2ZXJzaW9uICAgICAgICAgPSByZXF1aXJlKFwiLi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb247XHJcbmNvbnN0IENvb2tpZXNJQ0dDID0gcmVxdWlyZShcIi4vY29va2llc0ljZ2NcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHR2ZXJzaW9uLFxyXG5cdENvb2tpZXNJQ0dDXHJcbn07XHJcblxyXG4vKipcclxuICogVGhlIHZlcnNpb24gb2YgdGhlIHByb2plY3QgaW4gdXNlIGFzIHNwZWNpZmllZCBpbiBgcGFja2FnZS5qc29uYCxcclxuICogYENIQU5HRUxPRy5tZGAsIGFuZCB0aGUgR2l0SHViIHJlbGVhc2UuXHJcbiAqXHJcbiAqIEB2YXIge3N0cmluZ30gdmVyc2lvblxyXG4gKi9cclxuIl19
